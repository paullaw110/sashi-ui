# PRD: Library Page

**Status:** ✅ Complete - Phase 1+2 (2026-01-31)

## Overview
Replace the current "Skills" nav item with "Library" — a unified hub for everything Sashi-generated: PRDs, session transcripts, reports, skills, and configuration files. View-only interface for browsing Sashi's work and context.

---

## Problem
- PRDs, transcripts, and reports are scattered (repo files, Clawdbot logs, etc.)
- No single place to see "what has Sashi created?"
- No visibility into session history or daily reports
- Skills page is underutilized as a standalone nav item

## Solution
A Library page with tabbed navigation:
- **PRDs** — All PRD documents with build status
- **Reports** — Morning and nightly summaries
- **Transcripts** — Session conversation history (30 days)
- **Skills** — Available Sashi skills
- **Config** — AGENTS.md, SOUL.md, TOOLS.md, etc.

---

## User Flow

### Navigation
Sidebar shows "Library" instead of "Skills". Clicking opens the Library page.

### Layout

```
┌─────────────────────────────────────────────────────────────────────────┐
│  Library                                                                │
├─────────────────────────────────────────────────────────────────────────┤
│  [PRDs] [Reports] [Transcripts] [Skills] [Config]                       │
├───────────────────┬─────────────────────────────────────────────────────┤
│                   │                                                     │
│  Sub-nav          │  Content Area                                       │
│  (file list)      │  (rendered markdown / content)                      │
│                   │                                                     │
│  ┌─────────────┐  │  ┌─────────────────────────────────────────────┐   │
│  │ PRD-library │◀─┼──│ # PRD: Library Page                         │   │
│  │ PRD-ai-wor… │  │  │                                             │   │
│  │ PRD-org-tab │  │  │ ## Overview                                 │   │
│  │ PRD-tags    │  │  │ Replace the current "Skills" nav item...   │   │
│  │ PRD-icons   │  │  │                                             │   │
│  │ PRD-mac-app │  │  │ ## Problem                                  │   │
│  └─────────────┘  │  │ ...                                         │   │
│                   │  └─────────────────────────────────────────────┘   │
│                   │                                                     │
└───────────────────┴─────────────────────────────────────────────────────┘
```

---

## Tabs

### 1. PRDs
**Source:** `/docs/PRD-*.md` files in the repo

**Features:**
- List all PRD files with name and status badge
- Status options:
  - `Draft` — PRD created but not started
  - `In Progress` — Currently being built
  - `Built` — Feature shipped
  - `On Hold` — Paused/deprioritized
- Click to view rendered markdown
- Status stored in frontmatter or separate tracking file

**Status tracking options:**
```yaml
# Option A: Frontmatter in each PRD
---
title: Library Page
status: in_progress
created: 2026-01-30
---

# Option B: Separate tracking file
# /docs/prd-status.json
{
  "PRD-library.md": { "status": "in_progress", "linkedTask": "abc123" },
  "PRD-ai-prd-workflow.md": { "status": "draft" }
}
```

Recommend Option B — keeps PRDs clean, easier to update programmatically.

### 2. Reports
**Source:** Generated by Sashi, stored in `/reports/` or database

**Types:**
- **Morning Report** — Daily briefing: today's tasks, calendar, priorities
- **Nightly Report** — End-of-day summary: completed, in progress, blockers

**Display:**
- List by date (most recent first)
- Click to view full report
- Filter by type (morning/nightly)

**Generation:**
- Cron job at ~7am for morning report
- Cron job at ~10pm for nightly report
- Stored as markdown files or in database

### 3. Transcripts
**Source:** Clawdbot session history (last 30 days)

**Features:**
- List sessions by date
- Show session summary/first message
- Click to view full conversation
- Search within transcripts (future)

**Data source:**
- Clawdbot stores session history
- API endpoint to fetch transcripts
- May need to sync to local storage for performance

### 4. Skills
**Source:** Current skills page content

**Features:**
- List available skills
- Show skill description
- Click to view SKILL.md content
- Same functionality as current /skills page

### 5. Config
**Source:** Workspace config files

**Files to show:**
- `AGENTS.md` — How Sashi operates
- `SOUL.md` — Sashi's personality
- `USER.md` — Info about Paul
- `TOOLS.md` — Tool-specific notes
- `HEARTBEAT.md` — Heartbeat configuration

**Features:**
- View-only (editing happens in IDE/files)
- Rendered markdown
- Shows what defines Sashi's behavior

---

## Data Model

### PRD Status Tracking
```typescript
// /docs/prd-status.json
interface PRDStatus {
  [filename: string]: {
    status: 'draft' | 'in_progress' | 'built' | 'on_hold';
    linkedTaskId?: string;  // Link to task if exists
    updatedAt: string;
  }
}
```

### Reports Storage
```sql
-- Option: Store in database
CREATE TABLE reports (
  id TEXT PRIMARY KEY,
  type TEXT NOT NULL,  -- 'morning' | 'nightly'
  date TEXT NOT NULL,  -- YYYY-MM-DD
  content TEXT NOT NULL,  -- Markdown
  createdAt TEXT NOT NULL
);
```

Or store as files: `/reports/2026-01-30-morning.md`

---

## API Endpoints

### GET /api/library/prds
List all PRDs with status:
```json
{
  "prds": [
    {
      "filename": "PRD-library.md",
      "title": "Library Page",
      "status": "in_progress",
      "linkedTaskId": null,
      "updatedAt": "2026-01-30"
    }
  ]
}
```

### GET /api/library/prds/[filename]
Get PRD content:
```json
{
  "filename": "PRD-library.md",
  "content": "# PRD: Library Page\n\n...",
  "status": "in_progress"
}
```

### PATCH /api/library/prds/[filename]/status
Update PRD status:
```json
{ "status": "built" }
```

### GET /api/library/reports
List reports:
```json
{
  "reports": [
    { "id": "...", "type": "morning", "date": "2026-01-30", "preview": "..." }
  ]
}
```

### GET /api/library/reports/[id]
Get full report content.

### GET /api/library/transcripts
List session transcripts (from Clawdbot).

### GET /api/library/config/[filename]
Get config file content (AGENTS.md, etc.).

---

## UI Components

### LibraryPage
```tsx
// /app/library/page.tsx
export default function LibraryPage() {
  return (
    <AppLayout>
      <Tabs defaultValue="prds">
        <TabsList>
          <TabsTrigger value="prds">PRDs</TabsTrigger>
          <TabsTrigger value="reports">Reports</TabsTrigger>
          <TabsTrigger value="transcripts">Transcripts</TabsTrigger>
          <TabsTrigger value="skills">Skills</TabsTrigger>
          <TabsTrigger value="config">Config</TabsTrigger>
        </TabsList>
        
        <TabsContent value="prds">
          <PRDsTab />
        </TabsContent>
        {/* ... other tabs */}
      </Tabs>
    </AppLayout>
  );
}
```

### PRDsTab
- Split view: file list (left) + content (right)
- Status badges with color coding
- Click to select and view

### ReportsTab
- Date-grouped list
- Morning/Nightly labels
- Click to expand

### MarkdownViewer
- Renders markdown content
- Syntax highlighting for code
- Clean typography

---

## Phases

### Phase 1: Basic Structure (~2-3 days)
- [ ] Rename Skills → Library in nav
- [ ] Create /library route with tabs
- [ ] PRDs tab: list files from /docs, render markdown
- [ ] Config tab: show AGENTS.md, SOUL.md, etc.
- [ ] Move current Skills content to Skills tab

### Phase 2: PRD Status (~1-2 days)
- [ ] Create prd-status.json tracking file
- [ ] Add status badges to PRD list
- [ ] API endpoint to update status
- [ ] Status filter/sort options

### Phase 3: Reports (~2-3 days)
- [ ] Design report format (morning/nightly)
- [ ] Create reports storage (files or DB)
- [ ] Set up cron jobs for report generation
- [ ] Reports tab UI

### Phase 4: Transcripts (~2-3 days)
- [ ] API integration with Clawdbot sessions
- [ ] Transcripts tab with date navigation
- [ ] Session viewer component
- [ ] 30-day rolling window

---

## Open Questions

1. **Report generation:** What should morning/nightly reports include?
   - Morning: Today's tasks, calendar, weather, priorities?
   - Nightly: Completed tasks, blockers, tomorrow preview?

2. **Transcript source:** Pull from Clawdbot API directly, or sync to local DB?

3. **PRD ↔ Task linking:** Should PRDs link to their implementation tasks?

---

## Success Metrics

- Library page visits (is it being used?)
- PRD status accuracy (are they kept updated?)
- Report usefulness (do they provide value?)

---

## Estimate

| Phase | Effort |
|-------|--------|
| Phase 1: Basic Structure | 2-3 days |
| Phase 2: PRD Status | 1-2 days |
| Phase 3: Reports | 2-3 days |
| Phase 4: Transcripts | 2-3 days |
| **Total** | **7-11 days** |

MVP (Phase 1 + 2) in ~4-5 days — PRDs with status + config viewer.
